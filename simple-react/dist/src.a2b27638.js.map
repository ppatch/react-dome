{"version":3,"sources":["src/react-dom/dom.js","src/react-dom/diff.js","src/react/component.js","src/react/create-element.js","src/react/index.js","src/react-dom/render.js","src/react-dom/index.js","src/index.js"],"names":["setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","diff","vnode","container","ret","diffNode","parentNode","appendChild","out","undefined","String","nodeType","textContent","document","createTextNode","replaceChild","tag","diffComponent","isSameNodeType","createElement","childNodes","map","children","length","diffChildren","diffAttributes","vchildren","domChildren","keyed","i","child","key","keyedLen","push","min","childrenLen","vchild","j","c","f","nextSibling","removeNode","insertBefore","_component","oldDom","constructor","setComponentProps","attrs","base","unmountComponent","createComponent","component","props","componentWillMount","componentWillReceiveProps","renderComponent","renderer","render","componentWillUpdate","componentDidUpdate","componentDidMount","inst","prototype","Component","componentWillUnmount","nodeName","old","attributes","attr","removeChild","isReactComponent","state","stateChange","Object","assign","_render","_container","textNode","keys","forEach","ReactDOM","Counter","num","setState","onClick","React","Hello","App","tree","getElementById"],"mappings":";;AOAA;;AACA;;;ADDA,ADAA,AHCA,ACDA,ACCA;AHDA;ADAA,AKEA,ADAA,SCASmF,OAAT,CAAkBzE,KAAlB,EAAyBC,SAAzB,EAAqC;AJDrC,AIGI,MAAKD,KAAK,KAAKO,SAAf,EAA2B;ACF/B,AHAA,IGAMuE,KHAG7D,GGAK,GAAG,OHAjB,CAAwBH,GAAxB,EAA6B+B,KAA7B,EAAkD;AHC3C,AMALU,ADGE,AFHAV,EGAFU,AHAEV,EHASvD,EKGJU,CFHA,CGAD,EAANuD,AHAUV,CEGE,CAACuB,GFHE,CHAQ,GAAG,AGAP,EAAjB,OHAS9E,AKGT,EAA8B,ULHN,CAACC,GAAD,EAAMC,IAAN,EAAYC,KAAZ,EAAsB;AAChD,AMFe,ADKT,CCLR,ODKcwD,ODHC,ECGQ,GAAGjD,KAAlB;ALFN,AGHgD,ACG9C6D,EAAAA,IJAErE,IAAI,CIAG,EAATqE,EJAW,AMCAiB,WNDb,EAA0BtF,GIDb,CJCiB,GAAG,CGHI4B,MHGX,CAFsB,CAIhD,AGLgD;AEO1C,AFP+BA,ACInCH,EAAAA,EFHE4C,ACDiCzC,IEO1B6B,IFPqC,GCIjC,ECGK,ADHlBhC,CCGmByD,UAAf,EAA4B;ALDlC,AKEU,AFRsC,ACEnC,MJIT,IKEWzB,ILFHvD,IAAR,CAAaF,AKEO,CAACgE,GLFrB,CAAJ,EAAwB,aKEd,EAAqC;ALD7ChE,AKEYyD,ILFZzD,IAAI,AKEQyD,GLFLzD,IAAI,CAACG,CKES,CAAC6D,SLFf,EAAP,QKEY;ALDZjE,AKES,AHRX,ACCE,IHKAA,GAAG,CAACC,CGLG,GHKJ,CAAH,GAAYC,KAAK,EENK,EFMD,EAArB,CAFsB,CAGtB;AACD,AKCM,AHTiB,ACElBqB,GHEN,CGFMA,CEGA,EFHG,CDFGoC,CFQL,AGNDpC,EEOO,CFRJ,CHOEtB,AERa,EGSNyD,ELDH,KAAK,EKCO,CAACE,ILDrB,EAAsB,YKChB,EAAoC,uCHT7B,EAAI;ADD1B,ADUI,AKCQF,AFPJJ,IAAAA,EEOII,ELDJ,CAACxD,AGNI,EAALoD,GHMA,CKCa,CAACM,AFTX,EHQO,OAAO1D,KAAP,IKCN,CLDuB,QAA/B,EAAyC;AACvCF,AKCG,AHXiB,ACIlB6B,IAAAA,EHMF7B,GAAG,CAACK,EGNM,EAARwB,CHMF,CAAUvB,MGTL,CHSL,GAAoBJ,KAAK,IAAI,EAA7B;AACD,AGNGoC,IAAAA,CHIJ,EGJO,EAAEgB,EHMF,GGNO,CHMHpD,AGNIoC,GAAN,EHMO,EGNM,EHMF,QAAOpC,KAAP,MAAiB,QAA9B,EAAwC;AAC7C,AKCEwD,AHZJ,ACAO,GAAP,CEYIA,KHZCmB,EFWC,EKCO,CAACM,CLDJlF,KAAR,IAAgBC,AKCd,CHZJ,EGY2BQ,CHZH,CFWtB,EAAuB,CEXzB,IGYI,CAX0B,CAWU;ALApCV,AEVJ,ACIH,QHMOA,CEVC8E,EFUE,CAACzE,EEVR,GFUI,AEVS,CFUCJ,CEVd,IFUI,IAAkB,OAAOC,KAAK,CAACD,KAAD,CAAZ,KAAuB,QAAvB,GAAkCC,KAAK,CAACD,KAAD,CAAL,GAAc,IAAhD,GAAuDC,KAAK,CAACD,KAAD,CAA9E;AACD,AKCCQ,AHXJ,IGWIA,KAAK,AHXJkD,GGWOD,EHXZ,GAAaC,IGWQ,CAACK,AHXtB,MGWY,EAAR;AJVD,ADUF,AKCA,AHXF,IKNGwB,KNMUhF,IAAT,CAAcR,CEIN0B,EFJR,EAAmBjB,KAAnB,EAA0BC,SAA1B,EAAqC;AAC1C,ADUC,GARM,GCFDC,GAAG,ADUF,GCVKC,QAAQ,CAACZ,GAAD,EAAMS,KAAN,CAApB;ADWE,AKCA,MAAK,ELDDR,IAAI,CKCIQ,ILDC,CKCR,KAAiB,CLDlB,IAAoBR,GKCnB,CLDuB,GKCM,CLDFD,GAAhC,EAAqC,CKCIS,KAAP,KAAiB,QAAnD,EAA8D;AJVhE,ADUIT,AKCE,MJXFU,ADUAV,EKCMoF,CLDH,CAACnF,IAAD,CCVM,ADUT,CKCc,ELDFC,CCVCS,AIWIS,GJXD,CAACP,ADUA,IAAI,AKCI,CAACQ,CLD1B,ICVa,KAAmBX,IIWf,CAAyBD,IJX9C,CIWqB,CJX0B,AIWzC;AJVJC,ADUC,AKCG,IJXJA,OIWWA,EJXF,CAACI,MIWU,CAACA,IJXrB,CAAsBH,GAAtB,ACFOoE,GGaI,CAAuBK,QAAvB,CAAP,AHbgB;AKPtB,ANUC,AIWE,AHbDJ,MAAAA,MAAM,CAACC,MKRGtB,ALQV,CAAc,IKRhB,CLQqBmB,CKRF,ILQjB,EAA0BC,WAA1B;AKRiB,APqBjB,AEZA,QFYI7E,KAAJ,EAAW,kBEZK,IAAhB;ADGF,ADUIF,AKCF,AHbD,MFYGA,AKCIA,GJXDW,ADUA,AKCI,CLDHZ,ECVR,AIWcqB,QAAQ,CAACM,CLDnB,CAAiBzB,IAAjB,EAAuBC,KAAvB,AKCU,CAAwBO,KAAK,CAACc,GAA9B,CAAZ;AEvBiB,ANcpB,ADSI,KAFD,MAEO;AACLvB,AKCF,MLDEA,AKCGS,GLDA,CAACF,CKCI,CAAC+C,KAAX,EAAmB,MLDjB,CAAoBrD,IAApB;AOvBF,ANeJ,ADSK,AKCG+E,IAAAA,KJVCpE,CIUK,CAACyE,IAAP,CAAa5E,CJVrB,CAAkBT,GAAlB,AIU0B,CAACsD,CJVJ7C,IIUf,CJVR,CIUmC6E,CJVL,MIUtB,CAAoC,UAAAhD,GAAG,EAAI,6BEzBzCqB,KAAN;AACA,ANeF,ADSC,AKES,GL7BsC,CA4BhD,ECVI5C,GAAG,CMfA+D,AF0BS5E,EJXNF,GMfR,ANeF,AIWqB,GE1BN,AF0BSS,KAAK,CAAC6C,KAAN,CAAahB,GAAb,CAAd;AEzBNmD,ANgBJ,AIWU,ME3BNA,ANgBAhF,GMhBG,CF2BQ6B,CE3BN,ANgBA,EIWS,GJXJtB,EIWS,OJXnB,IAAuBP,AIWjB,EAA2B6B,GJXL,AIWQ,GAAG,EJXN,IAAjC,CIWiC,CAJY,CAMvC,CJbmC,OAAO7B,KAAP,KAAiB,SAA9D,EAAyEA,KAAK,GAAG,EAAR;AMjB1D,ANmBf,ADOD,CA7BM,IOGH,CNmBE,OAAOA,ECRE6D,GDQT,KAAiB,QAArB,EAA+B7D,KAAK,GAAGQ,MAAM,CAACR,KAAD,CAAd,CALH,CAO5B;AMvBmB,AFiCT,UAAK,OAAOP,KAAP,KAAiB,UAAtB,EAAmC;AE5B5C,ANmBD,AIUcF,MJVV,EIUUA,GAAG,CAAEsC,CJVR7B,EIUW,CAACL,EJVnB,KAAiB,IIUF,EAAF,CAAH,CJVd,EAA+B,AIUUF,KAA3B;AJRZ,AISS,OAFD,MAEO;AJRf,AISYF,QJTRA,AISQA,GJTL,AISQ,CAACD,GJTLC,GAAG,CAACkB,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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["/**\n设置属性需要考虑一些特殊情况，我们单独将其拿出来作为一个方法setAttribute\n */\nexport const setAttribute = (dom, name, value) => {\n  // 如果属性名是classname,则改回class\n  if (name === 'className') name = 'class';\n\n  // 如果属性名是onXXX,则是一个事件监听方法\n  if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || ''\n    // 如果属性名是style,则更新style对象\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string') {\n      dom.style.cssText = value || ''\n    } else if (value && typeof value === 'object') {\n      for(let name in value) {\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];\n      }\n    }\n  } else {\n    if (name !== \"class\" && name in dom) {\n      dom[name] = value || ''\n    }\n\n    if (value) {\n      dom.setAttribute(name, value)\n    } else {\n      dom.removeAttribute(name)\n    }\n  }\n  // 普通属性则直接更新属性\n}","import { Componet } from '../react'\nimport { setAttribute } from './dom'\n\n/**\n * @param {HTMLElement} dom 真实DOM\n * @param {vnode} vnode 虚拟DOM\n * @param {HTMLElement} container 容器\n * @returns {HTMLElement} 更新后的DOM\n */\nexport function diff(dom, vnode, container) {\n  const ret = diffNode(dom, vnode);\n\n  if (container && ret.parentNode !== container) {\n    container.appendChild(ret);\n  }\n\n  return ret;\n\n}\n\nfunction diffNode(dom, vnode) {\n  let out = dom;\n\n  if (vnode === undefined || vnode === null || typeof vnode === 'boolean') vnode = '';\n\n  if (typeof vnode === 'number') vnode = String(vnode);\n\n  // diff text node\n  if (typeof vnode === 'string') {\n\n    // 如果当前的DOM就是文本节点，则直接更新内容\n    if (dom && dom.nodeType === 3) {    // nodeType: https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n      if (dom.textContent !== vnode) {\n        dom.textContent = vnode;\n      }\n      // 如果DOM不是文本节点，则新建一个文本节点DOM，并移除掉原来的\n    } else {\n      out = document.createTextNode(vnode);\n      if (dom && dom.parentNode) {\n        dom.parentNode.replaceChild(out, dom);\n      }\n    }\n\n    return out;\n  }\n\n  if (typeof vnode.tag === 'function') {\n    return diffComponent(dom, vnode);\n  }\n\n  //\n  if (!dom || !isSameNodeType(dom, vnode)) {\n    out = document.createElement(vnode.tag);\n\n    if (dom) {\n      [...dom.childNodes].map(out.appendChild);    // 将原来的子节点移到新节点下\n\n      if (dom.parentNode) {\n        dom.parentNode.replaceChild(out, dom);    // 移除掉原来的DOM对象\n      }\n    }\n  }\n\n  if (vnode.children && vnode.children.length > 0 || (out.childNodes && out.childNodes.length > 0)) {\n    diffChildren(out, vnode.children);\n  }\n\n  diffAttributes(out, vnode);\n\n  return out;\n\n}\n\nfunction diffChildren(dom, vchildren) {\n  const domChildren = dom.childNodes;\n  const children = [];\n\n  const keyed = {};\n\n  // 将有key的节点和没有key的节点分开\n  if (domChildren.length > 0) {\n    for (let i = 0; i < domChildren.length; i++) {\n      const child = domChildren[i];\n      const key = child.key;\n      if (key) {\n        keyedLen++;\n        keyed[key] = child;\n      } else {\n        children.push(child);\n      }\n    }\n  }\n\n  if (vchildren && vchildren.length > 0) {\n\n    let min = 0;\n    let childrenLen = children.length;\n\n    for (let i = 0; i < vchildren.length; i++) {\n      // debugger\n      const vchild = vchildren[i];\n      const key = vchild.key;\n      let child;\n      \n      // 如果有key，找到对应key值的节点\n      if (key) {\n\n        if (keyed[key]) {\n          child = keyed[key];\n          keyed[key] = undefined;\n        }\n      \n      // 如果没有key，则优先找类型相同的节点\n      } else if (min < childrenLen) {\n\n        for (let j = min; j < childrenLen; j++) {\n\n          let c = children[j];\n\n          if (c && isSameNodeType(c, vchild)) {\n\n            child = c;\n            children[j] = undefined;\n\n            if (j === childrenLen - 1) childrenLen--;\n            if (j === min) min++;\n            break;\n\n          }\n\n        }\n\n      }\n\n      // 对比\n      child = diff(child, vchild);\n      // 更新DOM\n      const f = domChildren[i];\n      if (child && child !== dom && child !== f) {\n        // 如果更新前的对应位置为空，说明此节点是新增的\n        if (!f) {\n          dom.appendChild(child);\n          // 如果更新后的节点和更新前对应位置的下一个节点一样，说明当前位置的节点被移除了\n        } else if (child === f.nextSibling) {\n          removeNode(f);\n          // 将更新后的节点移动到正确的位置\n        } else {\n          // 注意insertBefore的用法，第一个参数是要插入的节点，第二个参数是已存在的节点\n          dom.insertBefore(child, f);\n        }\n      }\n\n    }\n  }\n\n}\n\nfunction diffComponent(dom, vnode) {\n  let c = dom && dom._component;\n  let oldDom = dom;\n  // 如果组件类型没有变化，则重新set props\n  if (c && c.constructor === vnode.tag) {\n\n    setComponentProps(c, vnode.attrs);\n    dom = c.base;\n    // 如果组件类型变化，则移除掉原来组件，并渲染新的组件\n  } else {\n\n    if (c) {\n      unmountComponent(c);\n      oldDom = null;\n    }\n\n    c = createComponent(vnode.tag, vnode.attrs);\n\n    setComponentProps(c, vnode.attrs);\n    dom = c.base;\n\n    if (oldDom && dom !== oldDom) {\n      oldDom._component = null;\n      removeNode(oldDom);\n    }\n\n  }\n\n  return dom;\n\n}\n\nfunction setComponentProps(component, props) {\n\n  if (!component.base) {\n    if (component.componentWillMount) component.componentWillMount();\n  } else if (component.componentWillReceiveProps) {\n    component.componentWillReceiveProps(props);\n  }\n\n  component.props = props;\n\n  renderComponent(component);\n\n}\n\nexport function renderComponent(component) {\n\n  let base;\n\n  const renderer = component.render();\n\n  if (component.base && component.componentWillUpdate) {\n    component.componentWillUpdate();\n  }\n  base = diffNode(component.base, renderer);\n\n  component.base = base;\n  base._component = component;\n\n  if (component.base) {\n    if (component.componentDidUpdate) component.componentDidUpdate();\n  } else if (component.componentDidMount) {\n    component.componentDidMount();\n  }\n\n  component.base = base;\n  base._component = component;\n\n}\n\nfunction createComponent(component, props) {\n  let inst;\n\n  if (component.prototype && component.prototype.render) {\n    inst = new component(props);\n  } else {\n    inst = new Component(props);\n    inst.constructor = component;\n    inst.render = function () {\n      return this.constructor(props);\n    }\n  }\n\n  return inst;\n\n}\n\nfunction unmountComponent(component) {\n  if (component.componentWillUnmount) component.componentWillUnmount();\n  removeNode(component.base);\n}\n\nfunction isSameNodeType(dom, vnode) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return dom.nodeType === 3;\n  }\n\n  if (typeof vnode.tag === 'string') {\n    return dom.nodeName.toLowerCase() === vnode.tag.toLowerCase();\n  }\n\n  return dom && dom._component && dom._component.constructor === vnode.tag;\n}\n\nfunction diffAttributes(dom, vnode) {\n\n  const old = {};    // 当前DOM的属性\n  const attrs = vnode.attrs;     // 虚拟DOM的属性\n\n  for (let i = 0; i < dom.attributes.length; i++) {\n    const attr = dom.attributes[i];\n    old[attr.name] = attr.value;\n  }\n\n  // 如果原来的属性不在新的属性当中，则将其移除掉（属性值设为undefined）\n  for (let name in old) {\n\n    if (!(name in attrs)) {\n      setAttribute(dom, name, undefined);\n    }\n\n  }\n\n  // 更新新的属性值\n  for (let name in attrs) {\n\n    if (old[name] !== attrs[name]) {\n      setAttribute(dom, name, attrs[name]);\n    }\n\n  }\n\n}\n\nfunction removeNode(dom) {\n\n  if (dom && dom.parentNode) {\n    dom.parentNode.removeChild(dom);\n  }\n\n}","\nimport { renderComponent } from '../react-dom/diff'\n\nclass Component {\n  constructor(props = {}) {\n    this.isReactComponent = true;\n\n    this.state = {};\n    this.props = props;\n  }\n\n  setState(stateChange) {\n    Object.assign(this.state, stateChange);\n    renderComponent(this);\n  }\n}\n\nexport default Component;","import Component from './component.js'\n\nfunction createElement( tag, attrs, ...children ) {\n    attrs = attrs || {};\n\n    return {\n        tag,\n        attrs,\n        children,\n        key: attrs.key || null\n    }\n}\n\nexport default createElement;","  \nimport Component from './component.js'\nimport createElement from './create-element.js'\n\nexport default {\n    Component,\n    createElement\n}","import { diff } from './diff'\n\nfunction _render( vnode, container ) {\n\n    if ( vnode === undefined ) return;\n\n    if ( vnode.isReactComponent ) {\n        const component = vnode;\n\n        if ( component._container ) {\n            if ( component.componentWillUpdate ) {\n                component.componentWillUpdate();\n            }\n        } else if ( component.componentWillMount ) {\n            component.componentWillMount();\n        }\n\n        component._container = container;   // 保存父容器信息，用于更新\n\n        vnode = component.render();\n    }\n\n    if ( typeof vnode === 'string' || typeof vnode === 'number' ) {\n        let textNode = document.createTextNode( vnode );\n        return container.appendChild( textNode );\n    }\n\n    const dom = document.createElement( vnode.tag );\n\n    if ( vnode.attrs ) {\n        Object.keys( vnode.attrs ).forEach( key => {\n\n            const value = vnode.attrs[ key ];\n\n            if ( key === 'className' ) key = 'class';\n\n            // 如果是事件监听函数，则直接附加到dom上\n            if ( typeof value === 'function' ) {\n                dom[ key.toLowerCase() ] = value;\n            } else {\n                dom.setAttribute( key, vnode.attrs[ key ] );\n            }\n\n        } );\n    }\n\n    if ( vnode.children ) {\n        vnode.children.forEach( child => _render( child, dom ) );\n    }\n\n    return container.appendChild( dom );\n}\n\nfunction render( vnode, container, dom ) {\n    return diff( dom, vnode, container );\n}\n\nexport default render","import render from './render'\n\nconst ReactDOM = {\n  render\n}\n\nexport default ReactDOM;","import React from './react'\nimport ReactDOM from './react-dom'\n\nclass Counter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      num: 1\n    }\n  }\n\n  onClick() {\n    this.setState({ num: this.state.num + 1 });\n  }\n\n  render() {\n    return (\n      <div onClick={this.props.onClick}>\n        <h1>count: {this.state.num}</h1>\n        <button onClick={() => this.onClick()}>add</button>\n      </div>\n    );\n  }\n}\nclass Hello extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: 'patch'\n    }\n  }\n\n  render() {\n    const { name } = this.state\n\n    return (\n      <div>\n        hello, {name}\n      </div>\n    )\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n    }\n  }\n\n  render() {\n    const tree = (\n      <div>\n        <div>hello, {this.props.name}</div>\n         <Counter />\n      </div>\n    )\n    return tree\n  }\n}\n\nReactDOM.render(\n  <App name='patch'/>,\n  document.getElementById('root')\n);"]}