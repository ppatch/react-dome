{"version":3,"sources":["src/react-dom/dom.js","src/react-dom/diff.js","src/react/component.js","src/react/create-element.js","src/react/index.js","src/react-dom/render.js","src/react-dom/index.js","src/index.js","../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","diff","vnode","container","ret","diffNode","parentNode","appendChild","out","undefined","String","nodeType","textContent","document","createTextNode","replaceChild","tag","diffComponent","isSameNodeType","createElement","childNodes","map","children","length","diffChildren","diffAttributes","vchildren","domChildren","keyed","i","child","key","keyedLen","push","min","childrenLen","vchild","j","c","f","nextSibling","removeNode","insertBefore","_component","oldDom","constructor","setComponentProps","attrs","base","unmountComponent","createComponent","component","props","componentWillMount","componentWillReceiveProps","renderComponent","renderer","render","componentWillUpdate","componentDidUpdate","componentDidMount","inst","prototype","Component","componentWillUnmount","nodeName","old","attributes","attr","removeChild","isReactComponent","state","stateChange","enqueueSetState","queue","renderQueue","defer","flush","some","item","fn","Promise","resolve","then","shift","prevState","Object","assign","_render","_container","textNode","keys","forEach","ReactDOM","Counter","num","setState","prveState","console","log","onClick","React","Hello","App","tree","getElementById","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","cb"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["/**\n设置属性需要考虑一些特殊情况，我们单独将其拿出来作为一个方法setAttribute\n */\nexport const setAttribute = (dom, name, value) => {\n  // 如果属性名是classname,则改回class\n  if (name === 'className') name = 'class';\n\n  // 如果属性名是onXXX,则是一个事件监听方法\n  if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || ''\n    // 如果属性名是style,则更新style对象\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string') {\n      dom.style.cssText = value || ''\n    } else if (value && typeof value === 'object') {\n      for(let name in value) {\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];\n      }\n    }\n  } else {\n    if (name !== \"class\" && name in dom) {\n      dom[name] = value || ''\n    }\n\n    if (value) {\n      dom.setAttribute(name, value)\n    } else {\n      dom.removeAttribute(name)\n    }\n  }\n  // 普通属性则直接更新属性\n}","import { Componet } from '../react'\nimport { setAttribute } from './dom'\n\n/**\n * @param {HTMLElement} dom 真实DOM\n * @param {vnode} vnode 虚拟DOM\n * @param {HTMLElement} container 容器\n * @returns {HTMLElement} 更新后的DOM\n */\nexport function diff(dom, vnode, container) {\n  const ret = diffNode(dom, vnode);\n\n  if (container && ret.parentNode !== container) {\n    container.appendChild(ret);\n  }\n\n  return ret;\n\n}\n\nfunction diffNode(dom, vnode) {\n  let out = dom;\n\n  if (vnode === undefined || vnode === null || typeof vnode === 'boolean') vnode = '';\n\n  if (typeof vnode === 'number') vnode = String(vnode);\n\n  // diff text node\n  if (typeof vnode === 'string') {\n\n    // 如果当前的DOM就是文本节点，则直接更新内容\n    if (dom && dom.nodeType === 3) {    // nodeType: https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n      if (dom.textContent !== vnode) {\n        dom.textContent = vnode;\n      }\n      // 如果DOM不是文本节点，则新建一个文本节点DOM，并移除掉原来的\n    } else {\n      out = document.createTextNode(vnode);\n      if (dom && dom.parentNode) {\n        dom.parentNode.replaceChild(out, dom);\n      }\n    }\n\n    return out;\n  }\n\n  if (typeof vnode.tag === 'function') {\n    return diffComponent(dom, vnode);\n  }\n\n  //\n  if (!dom || !isSameNodeType(dom, vnode)) {\n    out = document.createElement(vnode.tag);\n\n    if (dom) {\n      [...dom.childNodes].map(out.appendChild);    // 将原来的子节点移到新节点下\n\n      if (dom.parentNode) {\n        dom.parentNode.replaceChild(out, dom);    // 移除掉原来的DOM对象\n      }\n    }\n  }\n\n  if (vnode.children && vnode.children.length > 0 || (out.childNodes && out.childNodes.length > 0)) {\n    diffChildren(out, vnode.children);\n  }\n\n  diffAttributes(out, vnode);\n\n  return out;\n\n}\n\nfunction diffChildren(dom, vchildren) {\n  const domChildren = dom.childNodes;\n  const children = [];\n\n  const keyed = {};\n\n  // 将有key的节点和没有key的节点分开\n  if (domChildren.length > 0) {\n    for (let i = 0; i < domChildren.length; i++) {\n      const child = domChildren[i];\n      const key = child.key;\n      if (key) {\n        keyedLen++;\n        keyed[key] = child;\n      } else {\n        children.push(child);\n      }\n    }\n  }\n\n  if (vchildren && vchildren.length > 0) {\n\n    let min = 0;\n    let childrenLen = children.length;\n\n    for (let i = 0; i < vchildren.length; i++) {\n      // debugger\n      const vchild = vchildren[i];\n      const key = vchild.key;\n      let child;\n      \n      // 如果有key，找到对应key值的节点\n      if (key) {\n\n        if (keyed[key]) {\n          child = keyed[key];\n          keyed[key] = undefined;\n        }\n      \n      // 如果没有key，则优先找类型相同的节点\n      } else if (min < childrenLen) {\n\n        for (let j = min; j < childrenLen; j++) {\n\n          let c = children[j];\n\n          if (c && isSameNodeType(c, vchild)) {\n\n            child = c;\n            children[j] = undefined;\n\n            if (j === childrenLen - 1) childrenLen--;\n            if (j === min) min++;\n            break;\n\n          }\n\n        }\n\n      }\n\n      // 对比\n      child = diff(child, vchild);\n      // 更新DOM\n      const f = domChildren[i];\n      if (child && child !== dom && child !== f) {\n        // 如果更新前的对应位置为空，说明此节点是新增的\n        if (!f) {\n          dom.appendChild(child);\n          // 如果更新后的节点和更新前对应位置的下一个节点一样，说明当前位置的节点被移除了\n        } else if (child === f.nextSibling) {\n          removeNode(f);\n          // 将更新后的节点移动到正确的位置\n        } else {\n          // 注意insertBefore的用法，第一个参数是要插入的节点，第二个参数是已存在的节点\n          dom.insertBefore(child, f);\n        }\n      }\n\n    }\n  }\n\n}\n\nfunction diffComponent(dom, vnode) {\n  let c = dom && dom._component;\n  let oldDom = dom;\n  // 如果组件类型没有变化，则重新set props\n  if (c && c.constructor === vnode.tag) {\n\n    setComponentProps(c, vnode.attrs);\n    dom = c.base;\n    // 如果组件类型变化，则移除掉原来组件，并渲染新的组件\n  } else {\n\n    if (c) {\n      unmountComponent(c);\n      oldDom = null;\n    }\n\n    c = createComponent(vnode.tag, vnode.attrs);\n\n    setComponentProps(c, vnode.attrs);\n    dom = c.base;\n\n    if (oldDom && dom !== oldDom) {\n      oldDom._component = null;\n      removeNode(oldDom);\n    }\n\n  }\n\n  return dom;\n\n}\n\nfunction setComponentProps(component, props) {\n\n  if (!component.base) {\n    if (component.componentWillMount) component.componentWillMount();\n  } else if (component.componentWillReceiveProps) {\n    component.componentWillReceiveProps(props);\n  }\n\n  component.props = props;\n\n  renderComponent(component);\n\n}\n\nexport function renderComponent(component) {\n\n  let base;\n\n  const renderer = component.render();\n\n  if (component.base && component.componentWillUpdate) {\n    component.componentWillUpdate();\n  }\n  base = diffNode(component.base, renderer);\n\n  component.base = base;\n  base._component = component;\n\n  if (component.base) {\n    if (component.componentDidUpdate) component.componentDidUpdate();\n  } else if (component.componentDidMount) {\n    component.componentDidMount();\n  }\n\n  component.base = base;\n  base._component = component;\n\n}\n\nfunction createComponent(component, props) {\n  let inst;\n\n  if (component.prototype && component.prototype.render) {\n    inst = new component(props);\n  } else {\n    inst = new Component(props);\n    inst.constructor = component;\n    inst.render = function () {\n      return this.constructor(props);\n    }\n  }\n\n  return inst;\n\n}\n\nfunction unmountComponent(component) {\n  if (component.componentWillUnmount) component.componentWillUnmount();\n  removeNode(component.base);\n}\n\nfunction isSameNodeType(dom, vnode) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return dom.nodeType === 3;\n  }\n\n  if (typeof vnode.tag === 'string') {\n    return dom.nodeName.toLowerCase() === vnode.tag.toLowerCase();\n  }\n\n  return dom && dom._component && dom._component.constructor === vnode.tag;\n}\n\nfunction diffAttributes(dom, vnode) {\n\n  const old = {};    // 当前DOM的属性\n  const attrs = vnode.attrs;     // 虚拟DOM的属性\n\n  for (let i = 0; i < dom.attributes.length; i++) {\n    const attr = dom.attributes[i];\n    old[attr.name] = attr.value;\n  }\n\n  // 如果原来的属性不在新的属性当中，则将其移除掉（属性值设为undefined）\n  for (let name in old) {\n\n    if (!(name in attrs)) {\n      setAttribute(dom, name, undefined);\n    }\n\n  }\n\n  // 更新新的属性值\n  for (let name in attrs) {\n\n    if (old[name] !== attrs[name]) {\n      setAttribute(dom, name, attrs[name]);\n    }\n\n  }\n\n}\n\nfunction removeNode(dom) {\n\n  if (dom && dom.parentNode) {\n    dom.parentNode.removeChild(dom);\n  }\n\n}","\nimport { renderComponent } from '../react-dom/diff'\n\nclass Component {\n  constructor(props = {}) {\n    this.isReactComponent = true;\n\n    this.state = {};\n    this.props = props;\n  }\n\n  setState(stateChange) {\n    enqueueSetState(stateChange, this)\n    // Object.assign(this.state, stateChange);\n    // renderComponent(this);\n  }\n}\n\nconst queue = [];\nconst renderQueue = [];\nfunction enqueueSetState(stateChange, component) {\n\n  if (queue.length === 0) {\n    defer(flush)\n  }\n  queue.push({\n    stateChange, \n    component\n  });\n\n  // 如果renderQueue里没有当前组件，则添加到队列中\n  if ( !renderQueue.some( item => item === component ) ) {\n    renderQueue.push( component );\n  }\n}\n\nfunction defer(fn) {\n  return Promise.resolve().then(fn)\n}\n\nfunction flush() {\n  let item;\n  let component;\n  while(item = queue.shift()) {\n    const { stateChange, component } = item;\n\n    if (!component.prevState) {\n      component.prevState = Object.assign({}, component.state);\n    };\n\n    if (typeof stateChange === 'function') {\n      Object.assign(component.state, stateChange(component.prevState, component.props))\n    } else {\n      Object.assign(component.state, stateChange)\n    }\n\n    component.prevState = component.state\n  }\n\n  while(component = renderQueue.shift()) {\n    renderComponent(component)\n  }\n}\n\nexport default Component;","import Component from './component.js'\n\nfunction createElement( tag, attrs, ...children ) {\n    attrs = attrs || {};\n\n    return {\n        tag,\n        attrs,\n        children,\n        key: attrs.key || null\n    }\n}\n\nexport default createElement;","  \nimport Component from './component.js'\nimport createElement from './create-element.js'\n\nexport default {\n    Component,\n    createElement\n}","import { diff } from './diff'\n\nfunction _render( vnode, container ) {\n\n    if ( vnode === undefined ) return;\n\n    if ( vnode.isReactComponent ) {\n        const component = vnode;\n\n        if ( component._container ) {\n            if ( component.componentWillUpdate ) {\n                component.componentWillUpdate();\n            }\n        } else if ( component.componentWillMount ) {\n            component.componentWillMount();\n        }\n\n        component._container = container;   // 保存父容器信息，用于更新\n\n        vnode = component.render();\n    }\n\n    if ( typeof vnode === 'string' || typeof vnode === 'number' ) {\n        let textNode = document.createTextNode( vnode );\n        return container.appendChild( textNode );\n    }\n\n    const dom = document.createElement( vnode.tag );\n\n    if ( vnode.attrs ) {\n        Object.keys( vnode.attrs ).forEach( key => {\n\n            const value = vnode.attrs[ key ];\n\n            if ( key === 'className' ) key = 'class';\n\n            // 如果是事件监听函数，则直接附加到dom上\n            if ( typeof value === 'function' ) {\n                dom[ key.toLowerCase() ] = value;\n            } else {\n                dom.setAttribute( key, vnode.attrs[ key ] );\n            }\n\n        } );\n    }\n\n    if ( vnode.children ) {\n        vnode.children.forEach( child => _render( child, dom ) );\n    }\n\n    return container.appendChild( dom );\n}\n\nfunction render( vnode, container, dom ) {\n    return diff( dom, vnode, container );\n}\n\nexport default render","import render from './render'\n\nconst ReactDOM = {\n  render\n}\n\nexport default ReactDOM;","import React from './react'\nimport ReactDOM from './react-dom'\n\nclass Counter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      num: 1\n    }\n  }\n\n  onClick() {\n    for(let i = 0; i < 10; i++) {\n      this.setState(prveState => {\n        console.log(prveState)\n        return {\n          num: prveState.num + 1\n        }\n      });\n      console.log(this.state.num)\n    }\n  }\n\n  render() {\n    return (\n      <div onClick={this.props.onClick}>\n        <h1>count: {this.state.num}</h1>\n        <button onClick={() => this.onClick()}>add</button>\n      </div>\n    );\n  }\n}\nclass Hello extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: 'patch'\n    }\n  }\n\n  render() {\n    const { name } = this.state\n\n    return (\n      <div>\n        hello, {name}\n      </div>\n    )\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n    }\n  }\n\n  render() {\n    const tree = (\n      <div>\n        <div>hello, {this.props.name}</div>\n         <Counter />\n      </div>\n    )\n    return tree\n  }\n}\n\nReactDOM.render(\n  <App name='patch'/>,\n  document.getElementById('root')\n);","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}